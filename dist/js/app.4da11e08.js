(function(t){function e(e){for(var r,c,a=e[0],u=e[1],s=e[2],l=0,f=[];l<a.length;l++)c=a[l],Object.prototype.hasOwnProperty.call(o,c)&&o[c]&&f.push(o[c][0]),o[c]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(t[r]=u[r]);d&&d(e);while(f.length)f.shift()();return i.push.apply(i,s||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],r=!0,c=1;c<n.length;c++){var u=n[c];0!==o[u]&&(r=!1)}r&&(i.splice(e--,1),t=a(a.s=n[0]))}return t}var r={},o={app:0},i=[];function c(t){return a.p+"js/"+({Blog:"Blog"}[t]||t)+"."+{Blog:"f7340431"}[t]+".js"}function a(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.e=function(t){var e=[],n=o[t];if(0!==n)if(n)e.push(n[2]);else{var r=new Promise((function(e,r){n=o[t]=[e,r]}));e.push(n[2]=r);var i,u=document.createElement("script");u.charset="utf-8",u.timeout=120,a.nc&&u.setAttribute("nonce",a.nc),u.src=c(t);var s=new Error;i=function(e){u.onerror=u.onload=null,clearTimeout(l);var n=o[t];if(0!==n){if(n){var r=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;s.message="Loading chunk "+t+" failed.\n("+r+": "+i+")",s.name="ChunkLoadError",s.type=r,s.request=i,n[1](s)}o[t]=void 0}};var l=setTimeout((function(){i({type:"timeout",target:u})}),12e4);u.onerror=u.onload=i,document.head.appendChild(u)}return Promise.all(e)},a.m=t,a.c=r,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],s=u.push.bind(u);u.push=e,u=u.slice();for(var l=0;l<u.length;l++)e(u[l]);var d=s;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"56d7":function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"Blog",(function(){return _})),n.d(r,"BlogFeed",(function(){return C})),n.d(r,"BlogPost",(function(){return k}));n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("7a23"),i=Object(o["i"])("div",{class:"test"},null,-1);function c(t,e,n,r,c,a){var u=Object(o["y"])("router-view");return Object(o["r"])(),Object(o["f"])(o["a"],null,[Object(o["i"])(u),i],64)}var a={name:"App",setup:function(){return{name:"111"}}};a.render=c;var u=a,s=(n("7dc4"),n("7db0"),n("4160"),n("a630"),n("3ca3"),n("159b"),{inserted:function(t){function e(){var e=Array.from(t.children).find((function(t){return"IMG"===t.nodeName}));e&&(e.addEventListener("load",(function(){setTimeout((function(){return t.classList.add("loaded")}),100)})),e.addEventListener("error",(function(){return console.log("error")})),e.src=e.dataset.url)}function n(n,r){n.forEach((function(n){n.isIntersecting&&(e(),r.unobserve(t))}))}function r(){var e={root:null,threshold:"0"},r=new IntersectionObserver(n,e);r.observe(t)}window.IntersectionObserver?r():e()}}),l=(n("c975"),n("a434"),n("5530")),d=n("dea4");function f(t,e,n,r,i,c){var a=Object(o["y"])("comments-overlay");return Object(o["r"])(),Object(o["f"])("div",null,[(Object(o["r"])(!0),Object(o["f"])(o["a"],null,Object(o["x"])(c.targets,(function(t){return Object(o["r"])(),Object(o["f"])(a,{target:t,key:t.id},null,8,["target"])})),128))])}var m=void 0,p=Object(o["H"])("data-v-17d6a6ac");Object(o["u"])("data-v-17d6a6ac");var h={class:"comments-overlay"},g={key:1,class:"comments-overlay__form"};Object(o["s"])();var b=p((function(t,e,n,r,i,c){return Object(o["r"])(),Object(o["f"])("div",h,[(Object(o["r"])(!0),Object(o["f"])(o["a"],null,Object(o["x"])(n.target.comments,(function(t){return Object(o["r"])(),Object(o["f"])("div",{class:"comments-overlay__container",key:t.id,style:c.getCommentPostition(t)},[i.editting!=t?(Object(o["r"])(),Object(o["f"])("button",{key:0,class:"comments-overlay__indicator",onClick:function(e){return c.onIndicatorClick(t)}},Object(o["B"])(t.commenter.initials),9,["onClick"])):(Object(o["r"])(),Object(o["f"])("div",g,[Object(o["i"])("p",null,Object(o["B"])(c.getCommentMetaString(t)),1),Object(o["G"])(Object(o["i"])("textarea",{ref:"text","onUpdate:modelValue":e[1]||(e[1]=function(t){return i.text=t})},null,512),[[o["D"],i.text]]),Object(o["i"])("button",{onClick:e[2]||(e[2]=function(){return c.edit&&c.edit.apply(c,arguments)}),disabled:!i.text},"Save",8,["disabled"]),Object(o["i"])("button",{onClick:e[3]||(e[3]=function(){return c.cancel&&c.cancel.apply(c,arguments)})},"Cancel"),Object(o["i"])("button",{onClick:e[4]||(e[4]=function(){return c.remove&&c.remove.apply(c,arguments)})},"Remove")]))],4)})),128)),m.creating?(Object(o["r"])(),Object(o["f"])("div",{key:0,class:"comments-overlay__form",style:c.getCommentPostition(m.creating)},[Object(o["G"])(Object(o["i"])("textarea",{ref:"text","onUpdate:modelValue":e[5]||(e[5]=function(t){return i.text=t})},null,512),[[o["D"],i.text]]),Object(o["i"])("button",{onClick:e[6]||(e[6]=function(){return c.create&&c.create.apply(c,arguments)}),disabled:!i.text},"Save",8,["disabled"]),Object(o["i"])("button",{onClick:e[7]||(e[7]=function(){return c.cancel&&c.cancel.apply(c,arguments)})},"Cancel")],4)):Object(o["g"])("",!0)])})),v=(n("99af"),{props:["target"],data:function(){return{text:null,editting:null,creating:null}},methods:{onTargetClick:function(t){this._resetState();var e=this.target.getRect();this.creating={id:t.id,targetId:this.target.id,commenter:t.commenter,ratioX:(t.clientX-e.left)/e.width,ratioY:(t.clientY-e.top)/e.height}},onIndicatorClick:function(t){this._resetState(),this.text=t.text,this.editting=t},getCommentPostition:function(t){var e=this.target.getRect(),n=t.ratioX*e.width+e.left,r=t.ratioY*e.height+e.top;return{left:"".concat(n,"px"),top:"".concat(r,"px")}},getCommentMetaString:function(t){return"string"===typeof t.timestamp&&(t.timestamp=new Date(t.timestamp)),"".concat(t.commenter.fullName," - ").concat(t.timestamp.getMonth(),"/").concat(t.timestamp.getDate(),"/").concat(t.timestamp.getFullYear())},edit:function(){this.editting.text=this.text,this.editting.timestamp=new Date,this._emit("edit",this.editting),this._resetState()},create:function(){this.creating.text=this.text,this.creating.timestamp=new Date,this._emit("create",this.creating),this._resetState()},cancel:function(){this._resetState()},remove:function(){this._emit("remove",this.editting),this._resetState()},_emit:function(t,e){this.$root.$emit(t,e)},_resetState:function(){this.text=null,this.editting=null,this.creating=null}},mounted:function(){this.$root.$on("commentTargetClicked__".concat(this.target.id),this.onTargetClick)},beforeUnmount:function(){this.$root.$off("commentTargetClicked__".concat(this.target.id),this.onTargetClick)}});n("ac0e");v.render=b,v.__scopeId="data-v-17d6a6ac";var O=v,j={components:{CommentsOverlay:O},computed:{targets:function(){return this.$root.targets}}};j.render=f;var y=j,w={commenterSelector:function(){return{id:null,fullName:"Anonymous",initials:"--",email:null}},data:{targets:{},onCreate:function(t){this.targets[t.targetId].comments.push(t)},onEdit:function(t){var e=this.targets[t.targetId].comments;e.splice(e.indexOf(t),1,t)},onRemove:function(t){console.log(t);var e=this.targets[t.targetId].comments;console.log(e.indexOf(t)),e.splice(e.indexOf(t),1)}}},x={install:function(t,e){var n=Object(l["a"])(Object(l["a"])({},w),e),r=Object(o["e"])({data:function(){return{targets:n.data.targets}},render:function(){return Object(o["l"])(y,{onCreate:n.data.onCreate,onEdit:n.data.onEdit,onRemove:n.data.onRemove})}});r.mount(document.body.appendChild(document.createElement("div"))),t.directive("comments-enabled",{mounted:function(t,e){r.$set(r.targets,e.value,{id:e.value,comments:[],getRect:function(){return t.getBoundingClientRect()}}),t.addEventListener("click",(function(t){r.$emit("commentTargetClicked__".concat(e.value),{id:Object(d["d"])(),commenter:n.commenterSelector(),clientX:t.clientX,clientY:t.clientY})}))}})}},_={blog:function(){return{path:"/blog.json",resolve:function(t,e){var n=t.results[0];return e.merge({title:n.title,labels:{post:n.post_label,author:n.author_label}})}}}},C={feed:function(){return{path:"/feed.json",resolve:function(t,e){return e.pipe(t.results)}}}},k=(n("a15b"),n("ac1f"),n("1276"),{post:function(t){return{path:"/post/".concat(t,".json"),resolve:function(t,e){var n=t.results[0],r=n.title,o=n.content,i=n.meta;return o="<p>"+o.split("\n\n").join("</p><p>")+"</p>",e.merge(Object(l["a"])({title:r,content:o},i))}}}}),S=(n("b64b"),n("d3b7"),function(){var t={};return{has:function(e){return!!t[e]},get:function(e){return JSON.parse(t[e])},set:function(e,n){return t[e]=JSON.stringify(n),Promise.resolve(n)}}}()),P=n("da81"),E=n.n(P),$={install:function(t,e){var n=e.endpoint,r=void 0===n?"":n,o=e.resources,i=void 0===o?{}:o;t.config.globalProperties.$getResource=function(t,e){var n=this,o=this.$options.resource;if(o&&i[o]&&i[o][t]){var c=i[o][t](e),a=c.path,u=c.resolve,s=r+a;console.log(s);var l={pipe:function(t){return Promise.resolve(t)},merge:function(t){return E()(n.$data,t),Promise.resolve(t)},set:function(t){return Object.keys(t).forEach((function(e){n.$set(n.$data,e,t[e])})),Promise.resolve(t)}};return S.has(s)?u(S.get(s),l):fetch(s).then((function(t){return t.json()})).then((function(t){return S.set(s,t)})).then((function(t){return u(t,l)}))}}}},I=(n("5319"),n("3835")),T=function(){var t=[],e=!0,n=function(){var t=document.createElement("div"),e=document.createElement("style");return t.id="match-media-node",e.innerHTML="#match-media-node {\n      width: 100%;\n      height: 100%;\n      position: absolute;\n      bottom: 100%;\n      overflow: scroll;\n    }",document.head.appendChild(e),document.body.insertBefore(t,document.body.children[0]),{get width(){return t.clientWidth},get height(){return t.clientHeight},get orientation(){return t.clientHeight>t.clientWidth?"portrait":"landscape"},get fontSize(){return window.getComputedStyle(document.documentElement).getPropertyValue("font-size")}}}(),r=function(t,e){if("orientation"===t)return function(){return e===n.orientation};var r=t.split("-").reverse(),o=Object(I["a"])(r,2),i=o[0],c=o[1],a=c?"min"===c?"<":">":"==",u=function(){return~e.indexOf("em")?function(){return parseFloat(e)*n.fontSize}:function(){return parseFloat(e)}}(),s={width:function(){return u()+a+n.width},height:function(){return u()+a+n.height}};return s[i]},o=function(t){var e=t.replace(/[()\s]/g,"").split(":"),n=Object(I["a"])(e,2),o=n[0],i=n[1];return r(o,i)};return window.addEventListener("resize",(function(){if(e){e=!1;var r=n.width,o=n.height,i=setInterval((function(){r!==n.width||o!==n.height?(r=n.width,o=n.height):(clearTimeout(i),t.forEach((function(t){return t()})),e=!0)}),100)}})),function(e){var n=o(e),r={get matches(){return n()}};return Object(l["a"])(Object(l["a"])({},r),{},{addListener:function(e){var n=function(){return e(r)};t.push(n)}})}},M=window.matchMedia||T(),B={install:function(t,e){var n=Object(o["v"])({devices:{}}),r=function(t,e){return n.devices[t]=e,function(e){var r=e.matches;n.devices[t]=r}};Object.keys(e).forEach((function(t){var n=M("(".concat(e[t],")")),o=r(t,n.matches);n.addListener(o)})),t.config.globalProperties.$device=n.devices}},L=n("6c02"),R=function(){return n.e("Blog").then(n.bind(null,"2d33"))},A=[{path:"/",name:"feed",component:R},{path:"/by/:author",name:"author",props:!0,component:R},{path:"/read/:post",name:"post",props:!0,component:R}],D=Object(L["a"])({history:Object(L["b"])(),linkActiveClass:"active",routes:A}),N=D,Y=Object(o["e"])({render:function(){return Object(o["l"])(u)},mounted:function(){window.rootVue=this}});Y.use(N),Y.use(x,{commenterSelector:function(){return{id:Object(d["d"])(),fullName:"Mick Keeper",initials:"MK",email:"young@goldmorning.cn"}}}),Y.use($,{resources:r,endpoint:"./static/api"}),Y.use(B,{phone:"max-width: 567px",tablet:"min-width: 568px",mobile:"max-width: 1024px",laptop:"min-width: 1025px",desktop:"min-width: 1280px",monitor:"min-width: 1448px"}),Y.directive("lazyload",s),Y.mount("#app")},"7bd2":function(t,e,n){},"7dc4":function(t,e,n){},ac0e:function(t,e,n){"use strict";n("7bd2")},dea4:function(t,e,n){"use strict";n.d(e,"d",(function(){return r})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return c}));n("a15b"),n("fb6a"),n("d3b7"),n("ac1f"),n("25f0"),n("5319"),n("1276"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7");function r(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(t){return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)}))}var o=function(t){return t.toLowerCase().replace(" ","-")},i=function(t){return new Date(t).toString().split(" ").slice(0,4).join(" ").replace(/( \d+)$/,",$1")},c=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.2;if(t===e||t<e)return!1;var o=0;o=t<e?e-t:t-e;var i=function t(){if(o=parseInt(o/r),o<1)return n(o,!1),0;n(o),requestAnimationFrame(t)};i()}}});
//# sourceMappingURL=app.4da11e08.js.map